<!doctype html>
<html>
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
    <meta charset="utf-8">
    <title>Demo</title>
    <link rel="stylesheet" type="text/css" href="style/css/reset.css" />
    <link rel="stylesheet" type="text/css" href="style/css/main.css" />
    <link rel="stylesheet" type="text/css" href="http://at.alicdn.com/t/font_1421588979_2148175.css"/>
    <script type="text/javascript" src="style/js/zepto.js"></script>
    <script type="text/javascript" src="style/js/gmu/core/gmu.js"></script>
    <script type="text/javascript" src="style/js/gmu/core/event.js"></script>
    <script type="text/javascript" src="style/js/gmu/core/widget.js"></script>
    <script type="text/javascript" src="style/js/biz.js"></script>
</head>
<body>
<div class="page-status">

    <div class="content-wrap">
        <div class="content-inner">
            <button data-rel="true" class="ui-button ui-button-green page-status-btn-up">有伞</button>
            <button data-rel="false" class="ui-button ui-button-red page-status-btn-down">无伞</button>
        </div>
    </div>

    <script>
        $('button').on('click',function( e ){
            var btn = $(e.target);
            //btn.addClass('ui-button-green');
            momentBiz.ajax({
                functions : 'switchIsContributor',
                data : {
                    "username": momentBiz.getUserName(),
                    "isContributor": (btn.attr('data-rel') === 'true')
                },
                success : function( remoteData ){
                    console.log( 'switchIsContributor', remoteData );
                    if( remoteData && remoteData.result.code === 200 && remoteData.result.results ){
                        location.href = "page-map.html";
                    }
                },
                error: function(xhr, type){
                }
            });
        });
    </script>
</body>
</html>